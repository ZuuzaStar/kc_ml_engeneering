# Директория с данными фильмов

Эта директория содержит JSON файлы с данными фильмов для загрузки в базу данных. Система автоматически обрабатывает все JSON файлы при запуске и генерирует векторные эмбеддинги для семантического поиска.

## Структура JSON файла

Каждый JSON файл должен содержать массив объектов фильмов со следующей структурой:

```json
[
  {
    "title": "Название фильма",
    "description": "Описание фильма",
    "year": 2023,
    "genres": ["жанр1", "жанр2"]
  }
]
```

## Обязательные поля

- **title** (string) - название фильма
- **description** (string) - описание фильма (рекомендуется 100-1000 символов)
- **year** (integer) - год выпуска фильма
- **genres** (array of strings) - массив жанров

## Рекомендуемые поля

- **director** (string) - режиссер
- **cast** (array of strings) - актерский состав
- **rating** (float) - рейтинг (0.0 - 10.0)
- **country** (string) - страна производства

## Добавление новых фильмов

1. Создайте новый JSON файл в этой директории (например, `new_movies.json`)
2. Добавьте данные фильмов в указанном формате
3. Файл будет автоматически обработан при следующем запуске системы
4. Для каждого фильма автоматически генерируется векторный эмбеддинг

## Автоматическая обработка

### При запуске системы:
1. Сканирование всех `.json` файлов в директории
2. Парсинг данных фильмов
3. Генерация векторных эмбеддингов через ML модель
4. Загрузка в базу данных PostgreSQL с pgvector
5. Создание индексов для быстрого поиска

### ML модель для эмбеддингов:
- **Модель**: `sentence-transformers/all-MiniLM-L6-v2`
- **Размерность**: 384
- **Язык**: Многоязычная поддержка (русский, английский)
- **Входные данные**: название + описание + жанры

## Примеры файлов

- `movies.json` - основной файл с фильмами
- `new_movies.json` - новые фильмы для добавления
- `special_collection.json` - специальная коллекция фильмов
- `russian_movies.json` - русскоязычные фильмы
- `international_movies.json` - международные фильмы

## Примечания

- Все JSON файлы в этой директории будут автоматически обработаны
- Дубликаты фильмов (по названию и году) будут пропущены
- Описания фильмов ограничены 1000 символами
- Эмбеддинги генерируются на основе названия, описания и жанров
- Система поддерживает многоязычные описания

## Формат для лучших результатов

### Хороший пример:
```json
{
  "title": "Матрица",
  "description": "Хакер по имени Нео узнает от таинственных повстанцев правду о мире, в котором живет, и своем месте в борьбе против его угнетателей.",
  "year": 1999,
  "genres": ["фантастика", "боевик", "триллер"],
  "director": "Вачовски",
  "rating": 8.7
}
```

### Плохой пример:
```json
{
  "title": "Фильм",
  "description": "Описание",
  "year": 2023,
  "genres": ["жанр"]
}
```

## Устранение неполадок

### Если фильмы не загружаются:
1. Проверьте синтаксис JSON файла
2. Убедитесь, что все обязательные поля заполнены
3. Проверьте логи приложения на наличие ошибок
4. Убедитесь, что файл имеет расширение `.json`

### Если эмбеддинги не генерируются:
1. Проверьте, что ML сервис запущен
2. Убедитесь, что RabbitMQ доступен
3. Проверьте логи ML воркера
4. Убедитесь, что описания фильмов содержат достаточно текста

## Производительность

- **Время обработки**: ~1000 фильмов за 5-10 минут
- **Размер эмбеддингов**: ~1.5KB на фильм
- **Индексация**: IVFFLAT индекс для быстрого поиска
- **Поиск**: Косинусное сходство с оптимизированными запросами
